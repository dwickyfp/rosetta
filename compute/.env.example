# Rosetta Compute Engine Configuration

# PostgreSQL Database (Rosetta Config DB)
ROSETTA_DB_HOST=localhost
ROSETTA_DB_PORT=5432
ROSETTA_DB_NAME=rosetta
ROSETTA_DB_USER=postgres
ROSETTA_DB_PASSWORD=postgres

# Debezium Settings
DEBEZIUM_OFFSET_STORAGE_PATH=./tmp/offsets
DEBEZIUM_OFFSET_FLUSH_INTERVAL_MS=60000

# Pipeline Settings
PIPELINE_MAX_BATCH_SIZE=2048
PIPELINE_MAX_QUEUE_SIZE=8192
PIPELINE_POLL_INTERVAL_MS=500

# Logging
# DEBUG - Set to true for debug logging
DEBUG=false
LOG_LEVEL=INFO
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s
CREDENTIAL_ENCRYPTION_KEY=""

# Timezone
# Target timezone for all TZ-aware timestamps (IANA timezone name)
# All TIMESTAMPTZ / TIME WITH TIME ZONE values will be converted to this timezone
# Default: Asia/Jakarta (UTC+7)
ROSETTA_TIMEZONE=Asia/Jakarta

# Redis (used for DLQ)
REDIS_URL=redis://localhost:6379/0
DLQ_KEY_PREFIX=rosetta:dlq
DLQ_CHECK_INTERVAL=30                # Seconds between recovery attempts
DLQ_BATCH_SIZE=100

# Snowflake Destination Timeouts
# Increase these if you experience timeout errors with Snowflake
SNOWFLAKE_CONNECT_TIMEOUT=30.0       # Connection establishment timeout (seconds)
SNOWFLAKE_READ_TIMEOUT=300.0         # HTTP read timeout (seconds) - increased from default 120s
SNOWFLAKE_WRITE_TIMEOUT=60.0         # HTTP write timeout (seconds)
SNOWFLAKE_POOL_TIMEOUT=10.0          # Connection pool timeout (seconds)
SNOWFLAKE_BATCH_TIMEOUT_BASE=300     # Base timeout for write_batch (seconds) - increased from 120s
SNOWFLAKE_BATCH_TIMEOUT_MAX=600      # Maximum timeout for write_batch (seconds) - increased from 300s
